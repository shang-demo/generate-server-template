{"version":3,"sources":["package-info-parser.js"],"names":["parseNpmName","name","result","info","JSON","parse","error","Error","data","parseGitName","arr","split","url","body","parseName","test"],"mappings":";;;;;;;;;;AAAA;;AACA;;;;AAEA,eAAeA,YAAf,CAA4BC,IAA5B,EAAkC;AAChC,MAAIC,MAAM,GAAG,MAAM,gBAAM,gBAAeD,IAAK,SAA1B,CAAnB;AACA,MAAIE,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWH,MAAX,CAAX;;AAEA,MAAIC,IAAI,CAACG,KAAT,EAAgB;AACd,UAAM,IAAIC,KAAJ,CAAUJ,IAAI,CAACK,IAAf,CAAN;AACD;;AAED,SAAOL,IAAI,CAACK,IAAL,CAAUP,IAAjB;AACD;;AAED,eAAeQ,YAAf,CAA4BR,IAA5B,EAAkC;AAChC,MAAIS,GAAG,GAAGT,IAAI,CAACU,KAAL,CAAW,GAAX,CAAV;AACA,MAAIC,GAAG,GAAI,qCAAoCF,GAAG,CAAC,CAAD,CAAI,IAAGA,GAAG,CAAC,CAAD,CAAH,IAAU,QAAS,eAA5E;AACA,MAAIG,IAAI,GAAG,MAAM,6BAAG;AAAED,IAAAA;AAAF,GAAH,CAAjB;AAEA,MAAIT,IAAI,GAAGC,IAAI,CAACC,KAAL,CAAWQ,IAAX,CAAX;AAEA,SAAOV,IAAI,CAACF,IAAZ;AACD;;AAED,eAAea,SAAf,CAAyBb,IAAzB,EAA+B;AAC7B,MAAI,KAAKc,IAAL,CAAUd,IAAV,CAAJ,EAAqB;AACnB,WAAOD,YAAY,CAACC,IAAD,CAAnB;AACD,GAFD,MAGK,IAAI,KAAKc,IAAL,CAAUd,IAAV,CAAJ,EAAqB;AACxB,WAAOQ,YAAY,CAACR,IAAD,CAAnB;AACD;;AAED,SAAOD,YAAY,CAACC,IAAD,CAAnB;AACD;;eAGc;AAAEQ,EAAAA,YAAF;AAAgBT,EAAAA,YAAhB;AAA8Bc,EAAAA;AAA9B,C","sourcesContent":["import rp from 'request-promise';\nimport { exec } from './util';\n\nasync function parseNpmName(name) {\n  let result = await exec(`yarnpkg info ${name} --json`);\n  let info = JSON.parse(result);\n\n  if (info.error) {\n    throw new Error(info.data);\n  }\n\n  return info.data.name;\n}\n\nasync function parseGitName(name) {\n  let arr = name.split(/#/);\n  let url = `https://raw.githubusercontent.com/${arr[0]}/${arr[1] || 'master'}/package.json`;\n  let body = await rp({ url });\n\n  let info = JSON.parse(body);\n\n  return info.name;\n}\n\nasync function parseName(name) {\n  if (/^@/.test(name)) {\n    return parseNpmName(name);\n  }\n  else if (/\\//.test(name)) {\n    return parseGitName(name);\n  }\n\n  return parseNpmName(name);\n}\n\nexport { parseGitName, parseNpmName, parseName };\nexport default { parseGitName, parseNpmName, parseName };\n"],"file":"package-info-parser.js"}