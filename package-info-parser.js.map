{"version":3,"sources":["package-info-parser.js"],"names":["parseNpmName","name","result","info","JSON","parse","error","Error","data","parseGitName","arr","split","url","body","parseName","test"],"mappings":";;;;;;;;;;AAAA;;AACA;;;;AAEA,eAAeA,YAAf,CAA4BC,IAA5B,EAAkC;AAChC,MAAIC,SAAS,MAAM,gBAAM,gBAAeD,IAAK,SAA1B,CAAnB;AACA,MAAIE,OAAOC,KAAKC,KAAL,CAAWH,MAAX,CAAX;;AAEA,MAAIC,KAAKG,KAAT,EAAgB;AACd,UAAM,IAAIC,KAAJ,CAAUJ,KAAKK,IAAf,CAAN;AACD;;AAED,SAAOL,KAAKK,IAAL,CAAUP,IAAjB;AACD;;AAED,eAAeQ,YAAf,CAA4BR,IAA5B,EAAkC;AAChC,MAAIS,MAAMT,KAAKU,KAAL,CAAW,GAAX,CAAV;AACA,MAAIC,MAAO,qCAAoCF,IAAI,CAAJ,CAAO,IAAGA,IAAI,CAAJ,KAAU,QAAS,eAA5E;AACA,MAAIG,OAAO,MAAM,6BAAG;AAAED;AAAF,GAAH,CAAjB;AAEA,MAAIT,OAAOC,KAAKC,KAAL,CAAWQ,IAAX,CAAX;AAEA,SAAOV,KAAKF,IAAZ;AACD;;AAED,eAAea,SAAf,CAAyBb,IAAzB,EAA+B;AAC7B,MAAI,KAAKc,IAAL,CAAUd,IAAV,CAAJ,EAAqB;AACnB,WAAOD,aAAaC,IAAb,CAAP;AACD,GAFD,MAGK,IAAI,KAAKc,IAAL,CAAUd,IAAV,CAAJ,EAAqB;AACxB,WAAOQ,aAAaR,IAAb,CAAP;AACD;;AAED,SAAOD,aAAaC,IAAb,CAAP;AACD;;eAGc;AAAEQ,cAAF;AAAgBT,cAAhB;AAA8Bc;AAA9B,C","sourcesContent":["import rp from 'request-promise';\nimport { exec } from './util';\n\nasync function parseNpmName(name) {\n  let result = await exec(`yarnpkg info ${name} --json`);\n  let info = JSON.parse(result);\n\n  if (info.error) {\n    throw new Error(info.data);\n  }\n\n  return info.data.name;\n}\n\nasync function parseGitName(name) {\n  let arr = name.split(/#/);\n  let url = `https://raw.githubusercontent.com/${arr[0]}/${arr[1] || 'master'}/package.json`;\n  let body = await rp({ url });\n\n  let info = JSON.parse(body);\n\n  return info.name;\n}\n\nasync function parseName(name) {\n  if (/^@/.test(name)) {\n    return parseNpmName(name);\n  }\n  else if (/\\//.test(name)) {\n    return parseGitName(name);\n  }\n\n  return parseNpmName(name);\n}\n\nexport { parseGitName, parseNpmName, parseName };\nexport default { parseGitName, parseNpmName, parseName };\n"],"file":"package-info-parser.js"}