{"version":3,"sources":["constants.js"],"names":["type","jsPackageRequired","tsPackageRequired","packageRequired","components","error","src","value","als","use","config","log","alias","level","base","model","cp","connections","mongo","hosts","host","port","database","package","koa","koaController","dist","koaPolicy","dependencies","koaRoute","koaServer","socketIO","socket","headerKeys","key","header","undefined","required","autoJoinRoom","propGet","seneca","senecaController","senecaRoute","senecaWrapAct","senecaServer","connection","options","timeout","requestLog","responseLog","rabbitmq","transport","url","username","password","pin","consume","noAck","senecaClient","client","shutdown","cpDirs","yjDelDirs","yjCpDirs"],"mappings":"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","sourcesContent":["const type = 'ts';\n\nconst jsPackageRequired = ['bluebird', 'lodash', '@ofa2/ofa2', '@ofa2/ofa2-error'];\n\nconst tsPackageRequired = [\n  'tslib',\n  'bluebird',\n  'lodash',\n  '@ofa2/ofa2',\n  '@ofa2/ofa2-error',\n];\n\nconst packageRequired = type === 'ts' ? tsPackageRequired : jsPackageRequired;\n\nconst components = {\n  error: [\n    {\n      src: `src/config/error.${type}`,\n      value: `\n  import buildError from '@ofa2/ofa2-error';\n  \n  global.Errors = buildError({\n    UnknownError: { code: 1, message: 'unknown error, need feedback' },\n  });\n  `,\n    },\n  ],\n  als: [\n    {\n      use: 'ofa2-als',\n    },\n  ],\n  config: [\n    {\n      use: 'ofa2-config',\n    },\n  ],\n  log: [\n    {\n      use: 'ofa2-logger',\n      alias: 'log',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        log: {\n          level: 'trace',\n          base: null,\n        },\n      },\n    },\n  ],\n  model: [\n    {\n      use: 'ofa2-model',\n    },\n    {\n      cp: `src/config/models.${type}`,\n    },\n    {\n      cp: 'src/models',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        connections: {\n          mongo: {\n            hosts: [{ host: '127.0.0.1', port: 27017 }],\n            database: 'noName',\n          },\n        },\n      },\n    },\n    {\n      package: '@types/mongoose',\n    },\n  ],\n  koa: [\n    {\n      use: 'ofa2-koa',\n    },\n  ],\n  koaController: [\n    {\n      use: 'ofa2-controller',\n    },\n    {\n      cp: {\n        src: 'src/controllers-koa',\n        dist: 'src/controllers',\n      },\n    },\n  ],\n  koaPolicy: [\n    {\n      use: 'ofa2-koa-policy',\n    },\n    {\n      cp: `src/config/policies.${type}`,\n    },\n    {\n      cp: 'src/policies',\n    },\n    {\n      dependencies: ['shortid'],\n    },\n  ],\n  koaRoute: [\n    {\n      use: 'ofa2-koa-route',\n    },\n    {\n      cp: {\n        src: `src/config/routes-koa.${type}`,\n        dist: `src/config/routes.${type}`,\n      },\n    },\n  ],\n  koaServer: [\n    {\n      use: 'ofa2-koa-server',\n    },\n  ],\n  socketIO: [\n    {\n      use: 'ofa2-socket-io',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        socket: {\n          headerKeys: [\n            {\n              key: 'userId',\n              header: undefined,\n              required: false,\n            },\n          ],\n          autoJoinRoom: true,\n          propGet: true,\n        },\n      },\n    },\n  ],\n\n  seneca: [\n    {\n      use: 'ofa2-seneca',\n    },\n  ],\n  senecaController: [\n    {\n      use: 'ofa2-controller',\n    },\n    {\n      cp: {\n        src: 'src/controllers-seneca',\n        dist: 'src/controllers',\n      },\n    },\n  ],\n  senecaRoute: [\n    {\n      use: 'ofa2-seneca-wrap-route',\n    },\n    {\n      use: 'ofa2-seneca-route',\n    },\n    {\n      cp: {\n        src: `src/config/routes-seneca.${type}`,\n        dist: `src/config/routes.${type}`,\n      },\n    },\n  ],\n  senecaWrapAct: [\n    {\n      use: 'ofa2-seneca-wrap-act',\n    },\n  ],\n  senecaServer: [\n    {\n      src: `src/config/seneca.${type}`,\n      value: {\n        connection: 'rabbitmq',\n        options: {\n          timeout: 600000,\n        },\n        requestLog: 'plain',\n        responseLog: true,\n      },\n    },\n    {\n      package: '@ofa2/ofa2-seneca-amqp-transport',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        connections: {\n          rabbitmq: {\n            transport: '@ofa2/ofa2-seneca-amqp-transport',\n            options: {\n              url: 'amqp://127.0.0.1',\n              username: undefined,\n              password: undefined,\n\n              type: 'amqp',\n              pin: 'role:template',\n              consume: {\n                noAck: true,\n              },\n            },\n          },\n        },\n      },\n    },\n  ],\n  senecaClient: [\n    {\n      use: 'ofa2-seneca-client',\n    },\n\n    {\n      src: `src/config/seneca.${type}`,\n      value: {\n        options: {\n          timeout: 600000,\n        },\n        client: {\n          connection: 'senecaClient',\n        },\n      },\n    },\n    {\n      package: '@ofa2/ofa2-seneca-amqp-transport',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        connections: {\n          senecaClient: {\n            transport: '@ofa2/ofa2-seneca-amqp-transport',\n            options: {\n              url: 'amqp://127.0.0.1',\n              username: undefined,\n              password: undefined,\n\n              type: 'amqp',\n              pin: ['role:template'],\n              consume: {\n                noAck: true,\n              },\n            },\n          },\n        },\n      },\n    },\n  ],\n  shutdown: [\n    {\n      use: 'ofa2-shutdown',\n    },\n  ],\n};\n\nconst cpDirs = [\n  'config',\n  `src/config/error.${type}`,\n  `src/config/global.${type}`,\n  `src/config/http.${type}`,\n  'src/types',\n  'tsconfig.json',\n  '.eslintignore',\n  '.nvmrc',\n  '.eslintrc.js',\n  '.gitignore',\n  'gulpfile.js',\n  'Makefile',\n  'index.ts',\n];\n\nconst yjDelDirs = [\n  'config/Dockerfiles',\n  'config/script-tools',\n  'config/remote.config.json',\n  'Makefile',\n];\nconst yjCpDirs = ['.gitignore', 'client', 'devops', 'devops.sh', 'prepare.sh'];\n\nexport { components, cpDirs, yjDelDirs, yjCpDirs, packageRequired };\nexport default {};\n"],"file":"constants.js"}