{"version":3,"sources":["constants.js"],"names":["type","jsPackageRequired","tsPackageRequired","packageRequired","components","error","src","value","als","use","config","log","alias","level","base","model","cp","connections","mongo","hosts","host","port","database","package","koa","koaController","dist","koaPolicy","dependencies","koaRoute","koaServer","socketIO","socket","headerKeys","key","header","undefined","required","autoJoinRoom","propGet","seneca","senecaController","senecaRoute","senecaWrapAct","senecaServer","connection","options","timeout","requestLog","responseLog","rabbitmq","transport","url","username","password","pin","consume","noAck","senecaClient","client","shutdown","cpDirs","yjDelDirs","yjCpDirs"],"mappings":"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","sourcesContent":["const type = 'ts';\n\nconst jsPackageRequired = ['bluebird', 'lodash', '@ofa2/ofa2', '@ofa2/ofa2-error'];\n\nconst tsPackageRequired = [\n  'tslib',\n  'bluebird',\n  'lodash',\n  '@ofa2/ofa2',\n  '@ofa2/ofa2-error',\n];\n\nconst packageRequired = type === 'ts' ? tsPackageRequired : jsPackageRequired;\n\nconst components = {\n  error: [\n    {\n      src: `src/config/error.${type}`,\n      value: `\n  import buildError from '@ofa2/ofa2-error';\n  \n  global.Errors = buildError({\n    UnknownError: { code: 1, message: 'unknown error, need feedback' },\n  });\n  `,\n    },\n  ],\n  als: [\n    {\n      use: 'ofa2-als',\n    },\n  ],\n  config: [\n    {\n      use: 'ofa2-config',\n    },\n  ],\n  log: [\n    {\n      use: 'ofa2-logger',\n      alias: 'log',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        log: {\n          level: 'trace',\n          base: null,\n        },\n      },\n    },\n  ],\n  model: [\n    {\n      use: 'ofa2-model',\n    },\n    {\n      cp: `src/config/models.${type}`,\n    },\n    {\n      cp: 'src/models',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        connections: {\n          mongo: {\n            hosts: [{ host: '127.0.0.1', port: 27017 }],\n            database: 'noName',\n          },\n        },\n      },\n    },\n    {\n      package: '@types/mongoose',\n    },\n  ],\n  koa: [\n    {\n      use: 'ofa2-koa',\n    },\n  ],\n  koaController: [\n    {\n      use: 'ofa2-controller',\n    },\n    {\n      cp: {\n        src: 'src/controllers-koa',\n        dist: 'src/controllers',\n      },\n    },\n  ],\n  koaPolicy: [\n    {\n      use: 'ofa2-koa-policy',\n    },\n    {\n      cp: `src/config/policies.${type}`,\n    },\n    {\n      cp: 'src/policies',\n    },\n    {\n      dependencies: ['shortid'],\n    },\n  ],\n  koaRoute: [\n    {\n      use: 'ofa2-koa-route',\n    },\n    {\n      cp: {\n        src: `src/config/routes-koa.${type}`,\n        dist: `src/config/routes.${type}`,\n      },\n    },\n  ],\n  koaServer: [\n    {\n      use: 'ofa2-koa-server',\n    },\n  ],\n  socketIO: [\n    {\n      use: 'ofa2-socket-io',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        socket: {\n          headerKeys: [\n            {\n              key: 'userId',\n              header: undefined,\n              required: false,\n            },\n          ],\n          autoJoinRoom: true,\n          propGet: true,\n        },\n      },\n    },\n  ],\n\n  seneca: [\n    {\n      use: 'ofa2-seneca',\n    },\n  ],\n  senecaController: [\n    {\n      use: 'ofa2-controller',\n    },\n    {\n      cp: {\n        src: 'src/controllers-seneca',\n        dist: 'src/controllers',\n      },\n    },\n  ],\n  senecaRoute: [\n    {\n      use: 'ofa2-seneca-wrap-route',\n    },\n    {\n      use: 'ofa2-seneca-route',\n    },\n    {\n      cp: {\n        src: `src/config/routes-seneca.${type}`,\n        dist: `src/config/routes.${type}`,\n      },\n    },\n  ],\n  senecaWrapAct: [\n    {\n      use: 'ofa2-seneca-wrap-act',\n    },\n  ],\n  senecaServer: [\n    {\n      src: `src/config/seneca.${type}`,\n      value: {\n        connection: 'rabbitmq',\n        options: {\n          timeout: 600000,\n        },\n        requestLog: 'plain',\n        responseLog: true,\n      },\n    },\n    {\n      package: '@ofa2/ofa2-seneca-amqp-transport',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        connections: {\n          rabbitmq: {\n            transport: '@ofa2/ofa2-seneca-amqp-transport',\n            options: {\n              url: 'amqp://127.0.0.1',\n              username: undefined,\n              password: undefined,\n\n              type: 'amqp',\n              pin: 'role:template',\n              consume: {\n                noAck: true,\n              },\n            },\n          },\n        },\n      },\n    },\n  ],\n  senecaClient: [\n    {\n      use: 'ofa2-seneca-client',\n    },\n\n    {\n      src: `src/config/seneca.${type}`,\n      value: {\n        options: {\n          timeout: 600000,\n        },\n        client: {\n          connection: 'senecaClient',\n        },\n      },\n    },\n    {\n      package: '@ofa2/ofa2-seneca-amqp-transport',\n    },\n    {\n      src: `src/config/env/development.${type}`,\n      value: {\n        connections: {\n          senecaClient: {\n            transport: '@ofa2/ofa2-seneca-amqp-transport',\n            options: {\n              url: 'amqp://127.0.0.1',\n              username: undefined,\n              password: undefined,\n\n              type: 'amqp',\n              pin: ['role:template'],\n              consume: {\n                noAck: true,\n              },\n            },\n          },\n        },\n      },\n    },\n  ],\n  shutdown: [\n    {\n      use: 'ofa2-shutdown',\n    },\n  ],\n};\n\nconst cpDirs = [\n  'config',\n  `src/config/error.${type}`,\n  `src/config/global.${type}`,\n  `src/config/http.${type}`,\n  'src/types',\n  'tsconfig.json',\n  '.eslintignore',\n  '.nvmrc',\n  '.eslintrc.js',\n  '.gitignore',\n  'gulpfile.js',\n  'Makefile',\n];\n\nconst yjDelDirs = [\n  'config/Dockerfiles',\n  'config/script-tools',\n  'config/remote.config.json',\n  'Makefile',\n];\nconst yjCpDirs = ['.gitignore', 'client', 'devops', 'devops.sh', 'prepare.sh'];\n\nexport { components, cpDirs, yjDelDirs, yjCpDirs, packageRequired };\nexport default {};\n"],"file":"constants.js"}